# 支架控制  
西南交通大学本科课程设计 / 2023.05  

## 做了什么  
利用Matlab和CubeMX自动生成Stm32单片机代码，实现对光伏支架的高效控制。
关键词：太阳能电池板；光伏支架;自动代码生成；Matlab;CubeMX;Keil5
本系统通过一系列的处理，可以实时输入角度，产生电机控制输出。串口经过功能运算、数据处理和数学运算得到光伏支架的角度。
同时，天文算法根据时间参数、之前太阳轨迹的数据集和功能操作模块计算太阳角度。串口二经过数据处理、情况判断和选择，确认光伏支架应执行的动作类型。
根据串口二进制沉淀的动作类型，支架进入相应的状态机，保持平躺或连续跟踪太阳。状态机输出的指令由使能系统处理成驱动电机的指令。该指令由电机驱动系统转换为电机底层逻辑的控制指令，最后控制电机转动。

## 效果  
端口启动后会自动检测光伏支架相对于水平面的角度差。端口将角度间隙处理为信息，输入开发板进行判断。
控制器的工作原理如下：角度接收器感知到太阳的当前位置，并向开发板发送信号，开发板通过自动生成的代码控制电机的运行，从而使太阳能集热器始终指向太阳。
这个过程是智能的，因为自动生成的代码会根据太阳位置的变化自动选择不同的工作条件。
